# ๐ ุฏููู ุงุณุชุฎุฏุงู ุฑูุงุจุท R2 ุงููุจุงุดุฑุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุงูุจูุช ุงูุขู ูุฑุณู ูู ุฑุงุจุท ุงูููุฏูู ุงููุจุงุดุฑ ุนูู Cloudflare R2 ูู ุฌููุน ุงูุญุงูุงุชุ ููุง ูุณูุญ ูู ุจุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุฏููุงู ูู ุญุงูุฉ ูุดู n8n workflow.

---

## ๐ฏ ุงูุณููุงุฑูููุงุช

### โ ุงูุณููุงุฑูู 1: ูุฌุงุญ n8n (ุงููุถุน ุงูุทุจูุนู)

ุนูุฏ ูุฌุงุญ ุฑูุน ุงูููุฏูู ุฅูู R2 ูุฅุฑุณุงู ุงูุฅุดุนุงุฑ ูู n8n ุจูุฌุงุญุ ุณุชุญุตู ุนูู ุฑุณุงูุฉ:

```
โ ุชู ุญูุธ ุงูููุฏูู ุจูุฌุงุญ!

๐ค ุงููุณุชุฎุฏู: kio.dz_
๐ ุงุณู ุงูููู: kio.dz__2025-12-09T23-17-19.mp4
๐ ุงูุญุฌู: 134.22 MB

โณ ุฌุงุฑู ุงูุฑูุน ุฅูู Google Drive...
๐ค ุณูุชู ุฅุฑุณุงู ุฑุงุจุท ุงููุดุงูุฏุฉ ุนูุฏ ุงูุชูุงุก ุงูุฑูุน.

๐ ุฑุงุจุท ุงููุณุฎุฉ ุงููุคูุชุฉ (R2):
`https://134ed98c1c910ca2f5523385d88f00d5.r2.cloudflarestorage.com/tiktok-videos-temp/tiktok-videos/kio.dz_/kio.dz__2025-12-09T23-17-19.mp4`
```

**ูุงุฐุง ูุญุฏุซุ**
- โ ุงูููุฏูู ูุฑููุน ุนูู R2
- โ n8n ุชููู ุงูุฅุดุนุงุฑ ุจูุฌุงุญ
- โ n8n ุณูุจุฏุฃ ูู ุชุญููู ุงูููุฏูู ูุฑูุนู ูู Google Drive
- โ n8n ุณูุฑุณู ูู ุฑุงุจุท Drive ุนูุฏ ุงูุงูุชูุงุก

**ูุงุฐุง ุชูุนูุ**
- โณ ุงูุชุธุฑ ุฑุณุงูุฉ n8n ุจุฑุงุจุท Google Drive
- ๐พ ุงูุฑุงุจุท ุงููุคูุช (R2) ููุฌูุฏ ููุงุญุชูุงุท

---

### โ๏ธ ุงูุณููุงุฑูู 2: ูุดู n8n (ูุญุชุงุฌ ุชุฏุฎู ูุฏูู)

ุนูุฏ ูุดู ุฅุฑุณุงู ุงูุฅุดุนุงุฑ ูู n8nุ ุณุชุญุตู ุนูู ุฑุณุงูุฉ:

```
โ๏ธ ุชู ุญูุธ ุงูููุฏูู ุนูู R2 ููู ูุดู ุฅุฑุณุงู ุงูุฅุดุนุงุฑ ูู n8n!

๐ค ุงููุณุชุฎุฏู: kio.dz_
๐ ุงุณู ุงูููู: kio.dz__2025-12-09T23-17-19.mp4
๐ ุงูุญุฌู: 134.22 MB

๐ ุฑุงุจุท ุงูููุฏูู ุนูู R2 (ููุฑูุน ุงููุฏูู):
`https://134ed98c1c910ca2f5523385d88f00d5.r2.cloudflarestorage.com/...`

๐ ูุนูููุงุช ุฅุถุงููุฉ ููู n8n:
โข S3 Key: `tiktok-videos/kio.dz_/kio.dz__2025-12-09T23-17-19.mp4`
โข Username: `kio.dz_`
โข Chat ID: `123456789`

๐ก ุงูุณุฎ ุงูุฑุงุจุท ุฃุนูุงู ูุฃุนุฏ ุงููุญุงููุฉ ูุฏููุงู ุนุจุฑ n8n

[๐ ุฅุนุงุฏุฉ ุฑูุน ูุฏููุงู ุนุจุฑ n8n] [๐ฅ ูุชุญ ุงูููุฏูู]
```

**ูุงุฐุง ูุญุฏุซุ**
- โ ุงูููุฏูู ูุฑููุน ุนูู R2 ุจูุฌุงุญ
- โ ูุดู ุฅุฑุณุงู ุงูุฅุดุนุงุฑ ูู n8n (ุดุจูุฉุ n8n ูุนุทูุ ุฎุทุฃ ูู webhook)
- โ๏ธ ุงูููุฏูู ููุฌูุฏ ุนูู R2 ูููู ูู ูุจุฏุฃ ุงูุฑูุน ูู Google Drive

**ูุงุฐุง ุชูุนูุ**
1. **ุงูุณุฎ ุฑุงุจุท R2** ูู ุงูุฑุณุงูุฉ
2. **ุงูุชุญ n8n** ุนูู: `https://n8n.botdz.com`
3. **ุฃุนุฏ ุชุดุบูู workflow ูุฏููุงู** ุจุฅุฏุฎุงู ุงูุฑุงุจุท

---

## ๐ง ููููุฉ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุฏููุงู ูู n8n

### ุงูุทุฑููุฉ 1: ุนุจุฑ n8n Webhook ูุจุงุดุฑุฉ

```bash
curl -X POST https://n8n.botdz.com/webhook/tiktok-upload \
  -H "Content-Type: application/json" \
  -d '{
    "s3Url": "https://134ed98c1c910ca2f5523385d88f00d5.r2.cloudflarestorage.com/tiktok-videos-temp/tiktok-videos/kio.dz_/kio.dz__2025-12-09T23-17-19.mp4",
    "s3Key": "tiktok-videos/kio.dz_/kio.dz__2025-12-09T23-17-19.mp4",
    "filename": "kio.dz__2025-12-09T23-17-19.mp4",
    "username": "kio.dz_",
    "chatId": "123456789",
    "botToken": "YOUR_BOT_TOKEN",
    "timestamp": "2025-12-09T23:17:19.000Z"
  }'
```

### ุงูุทุฑููุฉ 2: ุนุจุฑ n8n Form (ุฅุฐุง ุฃูุดุฃุชู)

1. ุงูุชุญ: `https://n8n.botdz.com/form/retry-upload`
2. ุงูุตู ุฑุงุจุท R2
3. ุฃุฏุฎู ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ (username, chatId)
4. ุงุถุบุท Submit

### ุงูุทุฑููุฉ 3: ุนุจุฑ n8n Editor (ูููุทูุฑูู)

1. ุงูุชุญ workflow ูู n8n
2. ุงุฐูุจ ูู "Webhook" node
3. ุงุถุบุท "Execute Node"
4. ุฃุฏุฎู ุงูุจูุงูุงุช ูุฏููุงู
5. ุดุบูู ุงูู workflow

---

## ๐ ููู ุงูุจูุงูุงุช ุงูููุฑุณูุฉ

ุนูุฏูุง ููุฌุญ ุงูุฑูุน ุฅูู R2ุ ููุฑุณู ุงูุจูุช ูุฐู ุงูุจูุงูุงุช ูู n8n:

```json
{
  "s3Url": "https://...r2.cloudflarestorage.com/.../video.mp4",
  "s3Key": "tiktok-videos/username/video.mp4",
  "filename": "video.mp4",
  "username": "kio.dz_",
  "chatId": "123456789",
  "botToken": "7572051130:AAGr...",
  "timestamp": "2025-12-09T23:17:19.000Z"
}
```

### ุดุฑุญ ุงูุญููู:

| ุงูุญูู | ุงููุตู | ูุซุงู |
|------|------|------|
| `s3Url` | **ุฑุงุจุท R2 ุงููุจุงุดุฑ** ููุชุญููู | `https://...` |
| `s3Key` | ููุชุงุญ ุงูููู ูู R2 (ููู S3 node) | `tiktok-videos/kio.dz_/...` |
| `filename` | ุงุณู ุงูููู | `kio.dz__2025-12-09T23-17-19.mp4` |
| `username` | ุงุณู ุงููุณุชุฎุฏู ุนูู TikTok | `kio.dz_` |
| `chatId` | ูุนุฑูู ุงููุญุงุฏุซุฉ (ูุฅุฑุณุงู ุงูุฅุดุนุงุฑ) | `123456789` |
| `botToken` | token ุงูุจูุช (ูุฅุฑุณุงู ุฑุณุงุฆู) | `7572051130:...` |
| `timestamp` | ููุช ุงูุชุณุฌูู | `2025-12-09T23:17:19.000Z` |

---

## ๐๏ธ ุฅูุดุงุก n8n Form ูุฅุนุงุฏุฉ ุงูุฑูุน (ุงุฎุชูุงุฑู)

ุฅุฐุง ุฃุฑุฏุช ุฅูุดุงุก form ูู n8n ูุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงููุฏููุฉ:

### ุงูุฎุทูุงุช:

1. **ุงูุชุญ n8n** โ **Create Workflow**
2. **ุฃุถู Form Node**:
   - Form Title: "ุฅุนุงุฏุฉ ุฑูุน ููุฏูู TikTok"
   - URL: `https://n8n.botdz.com/form/retry-upload`
   
3. **ุญููู ุงูู Form**:
   ```
   โข S3 URL (text, required)
   โข S3 Key (text, required)
   โข Username (text, required)
   โข Chat ID (text, required)
   ```

4. **ุฃุถู S3 Download Node**:
   - ุงุณุชุฎุฏู S3 Key ููุชุญููู ูู R2

5. **ุฃุถู Google Drive Upload Node**:
   - ุงุฑูุน ุงูููุฏูู ุงูููุญููู

6. **ุฃุถู Telegram Send Message Node**:
   - ุฃุฑุณู ุฑุงุจุท Drive ูููุณุชุฎุฏู

7. **ุฃุถู S3 Delete Node**:
   - ุงุญุฐู ุงูููุฏูู ูู R2

---

## ๐ ุชุตุญูุญ ุงูุฃุฎุทุงุก

### ูุดููุฉ: ุงูุฑุงุจุท ูุง ูุนูู

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. โ ุงูููู ุชู ุญุฐูู ูู R2
2. โ ุงูุฑุงุจุท ููุชูู ุงูุตูุงุญูุฉ (ุฅุฐุง ูุงู signed URL)
3. โ ูุดููุฉ ูู ุตูุงุญูุงุช R2

**ุงูุญู:**
```bash
# ุชุญูู ูู ูุฌูุฏ ุงูููู ูู R2
aws s3 ls s3://tiktok-videos-temp/tiktok-videos/username/ \
  --endpoint-url https://134ed98c1c910ca2f5523385d88f00d5.r2.cloudflarestorage.com
```

### ูุดููุฉ: n8n ูุง ูุณุชุฌูุจ

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. โ n8n ูุนุทู
2. โ Webhook URL ุฎุงุทุฆ
3. โ ูุดููุฉ ูู ุงูุดุจูุฉ

**ุงูุญู:**
```bash
# ุชุญูู ูู ุญุงูุฉ n8n
curl https://n8n.botdz.com/healthz

# ุชุญูู ูู webhook
curl -X POST https://n8n.botdz.com/webhook/tiktok-upload \
  -H "Content-Type: application/json" \
  -d '{"test": true}'
```

---

## ๐ก ูุตุงุฆุญ ูููุฉ

### 1๏ธโฃ **ุงุญุชูุธ ุจุงูุฑูุงุจุท**
- ุฑูุงุจุท R2 ูุคูุชุฉ ุญุชู ูุชู ุงูุฑูุน ูู Google Drive
- ุงูุณุฎ ุงูุฑุงุจุท ูู ููุงู ุขูู ููุงุญุชูุงุท

### 2๏ธโฃ **ุชุญูู ูู n8n ุฏูุฑูุงู**
- ุชุฃูุฏ ูู ุฃู n8n ูุนูู ุจุดูู ุตุญูุญ
- ุงูุญุต logs ููุฃุฎุทุงุก ุงููุชูุฑุฑุฉ

### 3๏ธโฃ **ุงุณุชุฎุฏู ุงูุฃุฒุฑุงุฑ**
- ุงูุฃุฒุฑุงุฑ ูู ุงูุฑุณุงูุฉ ุชุณูู ุงููุตูู ุงูุณุฑูุน
- "ุฅุนุงุฏุฉ ุฑูุน ูุฏููุงู" ููุชุญ n8n form ูุจุงุดุฑุฉ
- "ูุชุญ ุงูููุฏูู" ููุชุญ ุงูุฑุงุจุท ูููุนุงููุฉ

### 4๏ธโฃ **ูุฑุงูุจุฉ ุญุฌู R2**
- R2 ูุคูุชุ ููู ุงุญุฐู ุงููููุงุช ุงููุฏููุฉ
- ุงุณุชุฎุฏู S3 Delete node ูู n8n ุจุนุฏ ุงููุฌุงุญ

---

## ๐ ุงูุฎูุงุตุฉ

ุงูุขู ูุฏูู:
- โ ุฑุงุจุท R2 ูุจุงุดุฑ ูู ูู ุฑุณุงูุฉ
- โ ูุนุงูุฌุฉ ุชููุงุฆูุฉ ููุดู n8n
- โ ุฅููุงููุฉ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุฏููุงู
- โ ูู ุงูุจูุงูุงุช ุงููุงุฒูุฉ ููุชุตุญูุญ

**ูุง ุชููู ูู ูุดู n8n - ุงูููุฏูู ูุญููุธ ุนูู R2 ูููููู ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูู ุฃู ููุช!** ๐

---

**ุชู ุงูุชุทููุฑ**: 10 ุฏูุณูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ**: 2.1.0
